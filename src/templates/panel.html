<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitStorm Panel</title>
    <!-- CSS_PLACEHOLDER -->
</head>
<body oncontextmenu="return false;">
    <div class="header">
        <h1>GitStorm</h1>
    </div>
    
    <div class="main-content">
        <div id="branchesPanel" class="panel branches-panel">
            <div class="panel-header" oncontextmenu="event.preventDefault(); showPanelContextMenu(event, 'branches')">
                <span>Branches</span>
                <div class="search-container">
                    <input type="text" id="branchesSearch" placeholder="Search branches..." />
                    <button class="clear-search" onclick="clearBranchesSearch()" title="Clear search">×</button>
                </div>
            </div>
            <div class="panel-content">
                <div id="branchesContent">
                    <div class="loading">Loading branches...</div>
                </div>
            </div>
            <div id="resizeBranches" class="resize-handle" data-panel="branches"></div>
        </div>
        
        <div id="commitsPanel" class="panel commits-panel">
            <div class="panel-header" oncontextmenu="event.preventDefault(); showPanelContextMenu(event, 'commits')">
                <span>Commits</span>
                <div class="search-container">
                    <input type="text" id="commitsSearch" placeholder="Search commits..." />
                    <button class="clear-search" onclick="clearCommitsSearch()" title="Clear search">×</button>
                </div>
            </div>
            <div class="panel-content">
                <div class="commits-header">
                    <div class="commits-filters">
                        <select id="userFilter" class="user-filter">
                            <option value="all">All Authors</option>
                        </select>
                        <div class="commits-compare">
                            <span class="compare-icon">🔄</span>
                            <select id="commitsCompareFilter" class="compare-select">
                                <option value="none">Compare with...</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="commits-content">
                    <div id="commitsContent">
                        <div class="loading">Loading commits...</div>
                    </div>
                </div>
            </div>
            <div id="resizeCommits" class="resize-handle" data-panel="commits"></div>
        </div>
        
        <div id="filesPanel" class="panel files-panel">
            <div class="panel-header" oncontextmenu="event.preventDefault(); showPanelContextMenu(event, 'files')">File Changes</div>
            <div class="panel-content">
                <div id="filesContent">
                    <div class="empty-state">
                        <h3>No selection</h3>
                        <p>Select a commit to view file changes, or <a href="#" onclick="showWorkingDirectoryChanges()">view working directory changes</a></p>
                    </div>
                </div>
            </div>
            <div id="resizeFiles" class="resize-handle" data-panel="files"></div>
        </div>
        
        <div class="panel diff-panel">
            <div class="panel-header" oncontextmenu="event.preventDefault(); showPanelContextMenu(event, 'diff')">Diff Viewer</div>
            <div class="panel-content">
                <div id="diffContent">
                    <div class="empty-state">
                        <h3>No diff selected</h3>
                        <p>Click on a file to view its changes</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Custom Context Menu -->
    <div id="contextMenu" class="context-menu" style="display: none;">
        <!-- Text/Branch/Commit common actions -->
        <div class="context-menu-item" data-action="copy">
            <span class="context-menu-icon">📋</span>
            <span class="context-menu-text">Copy</span>
        </div>
        
        <!-- File-specific actions -->
        <div class="context-menu-item" data-action="open">
            <span class="context-menu-icon">📄</span>
            <span class="context-menu-text">Open File</span>
        </div>
        <div class="context-menu-item" data-action="diff">
            <span class="context-menu-icon">🔍</span>
            <span class="context-menu-text">Show Diff</span>
        </div>
        <div class="context-menu-item" data-action="copy-path">
            <span class="context-menu-icon">📁</span>
            <span class="context-menu-text">Copy Path</span>
        </div>
        <div class="context-menu-item" data-action="reveal">
            <span class="context-menu-icon">🗂️</span>
            <span class="context-menu-text">Reveal in Explorer</span>
        </div>
        
        <!-- Branch-specific actions -->
        <div class="context-menu-item" data-action="checkout">
            <span class="context-menu-icon">🌿</span>
            <span class="context-menu-text">Checkout Branch</span>
        </div>
        <div class="context-menu-item" data-action="merge">
            <span class="context-menu-icon">🔀</span>
            <span class="context-menu-text">Merge Branch</span>
        </div>
        <div class="context-menu-item" data-action="delete-branch">
            <span class="context-menu-icon">🗑️</span>
            <span class="context-menu-text">Delete Branch</span>
        </div>
        
        <!-- Commit-specific actions -->
        <div class="context-menu-item" data-action="create-branch">
            <span class="context-menu-icon">🌿</span>
            <span class="context-menu-text">Create Branch</span>
        </div>
        <div class="context-menu-item" data-action="cherry-pick">
            <span class="context-menu-icon">🍒</span>
            <span class="context-menu-text">Cherry Pick</span>
        </div>
        <div class="context-menu-item" data-action="revert">
            <span class="context-menu-icon">↩️</span>
            <span class="context-menu-text">Revert</span>
        </div>
        <div class="context-menu-item" data-action="squash">
            <span class="context-menu-icon">🗜️</span>
            <span class="context-menu-text">Squash Commits</span>
        </div>
        <div class="context-menu-item" data-action="commit">
            <span class="context-menu-icon">💾</span>
            <span class="context-menu-text">Commit Changes</span>
        </div>
        
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="refresh">
            <span class="context-menu-icon">🔄</span>
            <span class="context-menu-text">Refresh</span>
        </div>
    </div>
    
    <!-- Load JavaScript modules in correct order -->
    <script src="core/PanelController.js"></script>
    <script src="handlers/MessageHandler.js"></script>
    <script src="handlers/ContextMenuHandler.js"></script>
    <script src="renderers/BranchRenderer.js"></script>
    <script src="renderers/CommitRenderer.js"></script>
    <script src="renderers/FileChangesRenderer.js"></script>
    <script src="renderers/FilterRenderer.js"></script>
    <script src="renderers/IconRenderer.js"></script>
    <script src="renderers/UIRenderer.js"></script>
    <script src="managers/SearchManager.js"></script>
    <script src="operations/GitOperations.js"></script>
    <script src="globals.js"></script>
    
    <!-- INITIAL_PANEL_SIZES_PLACEHOLDER -->
</body>
</html>
